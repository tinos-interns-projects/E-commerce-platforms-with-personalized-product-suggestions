{% extends 'base.html' %}

{% block title %}Inbox - E-Shop{% endblock %}

{% block content %}
<div class="container" style="max-width: 700px; margin-top: 30px;">
    <h2>ðŸ’¬ Inbox</h2>
    <p class="text-muted">Chat with admin support</p>

    <div class="chat-box" style="margin-top: 30px;">
        {% if messages %}
            {% for msg in messages %}
                <!-- User message (right) -->
                <div style="display: flex; justify-content: flex-end; margin-bottom: 15px;">
                    <div style="background-color: #dcf8c6; padding: 12px 15px; border-radius: 15px 15px 0 15px; max-width: 70%; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                        <div style="font-size: 5px; color: #474747;">You - {{ msg.date.strftime('%Y-%m-%d') }}</div>
                        <div style="margin-top: 5px; color:black;">{{ msg.message }}</div>
                    </div>
                </div>

                <!-- Admin response (left) -->
                {% if msg.respond_message %}
                <div style="display: flex; justify-content: flex-start; margin-bottom: 20px;">
                    <div style="background-color: #f1f0f0; padding: 12px 15px; border-radius: 15px 15px 15px 0; max-width: 70%; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                        
                        <div style="margin-top: 5px; color:black;">{{ msg.respond_message }}</div>
                    </div>
                </div>
                {% endif %}
            {% endfor %}
        {% else %}
            <div class="alert alert-info">No messages yet. Send your first message below.</div>
        {% endif %}
    </div>

    <!-- Message input form -->
     {% if messages %}
     <form action="{{ url_for('contact') }}" method="POST" class="contact-form">
    <div class="form-group">
                <label for="message">Message</label>
                <textarea id="message" name="message" placeholder="Your Message" rows="5" required></textarea>
            </div>
            <div class="form-actions">
                <button type="submit" class="submit-btn">Submit</button>
                </div>
        </form>
    {% endif %}
</div>
{% endblock %}
